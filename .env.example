# ===========================================
# PIS 环境变量配置示例
# 
# 使用方法:
#   1. 复制此文件: cp .env.example .env
#   2. 编辑 .env 文件，填入实际配置值
#   3. 不要将 .env 文件提交到 Git（已在 .gitignore 中）
#
# 注意: 此文件中的占位符（如 AUTO_GENERATE）会被部署脚本自动替换
# ===========================================

# ==================== 数据库配置 ====================
# 数据库类型：postgresql（自托管，推荐）或 supabase（云服务，向后兼容）
DATABASE_TYPE=postgresql

# PostgreSQL 连接配置（方式1：使用连接字符串）
# DATABASE_URL=postgresql://user:password@host:5432/database?sslmode=require

# PostgreSQL 连接配置（方式2：分别配置，推荐）
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=pis
DATABASE_USER=pis
DATABASE_PASSWORD=your-secure-password
DATABASE_SSL=false

# ==================== 认证配置 ====================
# JWT 签名密钥（用于会话管理，必须与 Worker 服务器一致）
# 至少 32 字符，建议使用 64 字符十六进制字符串
AUTH_JWT_SECRET=AUTO_GENERATE_32

# ==================== MinIO 存储配置 ====================
# 存储类型：minio（自托管）、oss（阿里云）、cos（腾讯云）、s3（AWS）
STORAGE_TYPE=minio

# MinIO 配置（STORAGE_TYPE=minio 时使用）
STORAGE_ENDPOINT=localhost
STORAGE_PORT=9000
STORAGE_USE_SSL=false
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=minioadmin
STORAGE_BUCKET=pis-photos
STORAGE_PUBLIC_URL=http://localhost:9000/pis-photos

# 兼容旧配置（MinIO）
MINIO_ENDPOINT_HOST=localhost
MINIO_ENDPOINT_PORT=9000
MINIO_USE_SSL=false
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=pis-photos
MINIO_PUBLIC_URL=http://localhost:9000/pis-photos

# ==================== Worker 服务配置 ====================
# Worker API URL（服务端使用）
WORKER_URL=http://localhost:3001
WORKER_API_URL=http://localhost:3001

# Worker API 公网 URL（前端使用，生产环境使用 HTTPS）
NEXT_PUBLIC_WORKER_URL=http://localhost:3001

# Worker API 认证密钥（必须与 Worker 服务器配置一致）
WORKER_API_KEY=AUTO_GENERATE_32

# ==================== Redis 配置 ====================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ==================== 应用配置 ====================
# 应用公网访问地址（用于生成链接、邮件等）
# 如果使用 frpc/ddnsto 内网穿透，填写内网穿透提供的域名
# 例如：https://pis.example.com 或 https://yourname.ddnsto.com
NEXT_PUBLIC_APP_URL=http://localhost:8080

# 媒体服务器公网 URL（前端访问媒体文件的地址，生产环境使用 HTTPS）
# 如果使用内网穿透，使用相同的域名
NEXT_PUBLIC_MEDIA_URL=http://localhost:8080/media

# 品牌信息（显示在页面标题、元数据等）
NEXT_PUBLIC_PHOTOGRAPHER_NAME=PIS Photography
NEXT_PUBLIC_PHOTOGRAPHER_TAGLINE=专业活动摄影

# ==================== Cloudflare Turnstile (可选) ====================
# 用于登录页面的机器人验证（防止暴力破解）
# 如果未配置，登录页面将不显示验证码
NEXT_PUBLIC_TURNSTILE_SITE_KEY=
TURNSTILE_SECRET_KEY=

# ==================== Cloudflare CDN 缓存清除 (可选) ====================
# 用于在删除照片时自动清除 CDN 缓存
# 如果未配置，删除照片后 CDN 缓存可能仍存在一段时间
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ZONE_ID=

# ==================== 向后兼容配置（Supabase，可选）====================
# 如果 DATABASE_TYPE=supabase，需要配置以下变量
# SUPABASE_URL=https://your-project.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
# NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
# NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# ==================== 轮询配置（可选）====================
# 用于替代 Supabase Realtime 的轮询间隔（毫秒）
# 默认值：3000（3秒）
NEXT_PUBLIC_POLLING_INTERVAL=3000
NEXT_PUBLIC_ADMIN_POLLING_INTERVAL=2000

# ==================== 日志配置（可选）====================
# 日志级别：trace, debug, info, warn, error, fatal
# 默认值：info
LOG_LEVEL=info

# 日志目录（Worker 服务使用，默认：logs）
LOG_DIR=logs

# 是否启用文件日志（Worker 服务，默认：true）
ENABLE_FILE_LOG=true

# 是否启用彩色日志输出（开发环境默认启用）
ENABLE_PRETTY_LOG=false
